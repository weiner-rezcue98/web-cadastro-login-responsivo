<!doctype html>
<html lang="pt-BR">

    

<head>
        
        <meta charset="utf-8" />
        <title>Registrar conta | weiner®</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta content="Makes Software Grow" name="description" />
        <meta content="Themesbrand v2 Pedro Weiner" name="author" />
        <!-- App favicon -->
        <link rel="shortcut icon" href="assets/images/favicone.ico">

        <!-- owl.carousel css -->
        <link rel="stylesheet" href="assets/libs/owl.carousel/assets/owl.carousel.min.css">

        <link rel="stylesheet" href="assets/libs/owl.carousel/assets/owl.theme.default.min.css">

        <!-- Bootstrap Css -->
        <link href="assets/css/bootstrap.min.css" id="bootstrap-style" rel="stylesheet" type="text/css" />
        <!-- Icons Css -->
        <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
        <!-- App Css-->
        <link href="assets/css/app.min.css" id="app-style" rel="stylesheet" type="text/css" />
        <!-- Form-icon Css -->
        <link href="assets/css/form-icon.css" rel="stylesheet" type="text/css" />

        <script src="https://www.google.com/recaptcha/api.js" async defer></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    </head>

    <body class="auth-body-bg">
        
        <div>
            <div class="container-fluid p-0">
                <div class="row g-0">
                    
                    <div class="col-xl-9">
                        <div class="auth-full-bg pt-lg-5 p-4" style="background-image: url('assets/images/bg-papel-register2.png'); background-size: cover; background-position: center;">
                            <div class="w-100">
                                <div class="bg-overlay"></div>
                                <div class="d-flex h-100 flex-column">
    
                                    <div class="p-4 mt-auto">
                                        <div class="row justify-content-center">
                                            <div class="col-lg-7">
                                                <div class="text-center">
                                                    
                                                    <h4 class="mb-3"><span class="text-primary"></span></h4>
                                                    
                                                    <div dir="ltr">
                                                        <div class="owl-carousel owl-theme auth-review-carousel" id="auth-review-carousel">
                                                            <div class="item">
                                                                <div class="py-3">
                                                                    <p class="font-size-16 mb-4 text-white"></p>
    
                                                                    <div>
                                                                        <h4 class="font-size-16 text-primary"></h4>
                                                                        <p class="font-size-14 mb-0 text-white"><i class="bx bxs-quote-alt-left text-primary h1 align-middle me-3"></i>"Do algoritmo ao usuário final, cada linha de código é uma oportunidade para inovar."</p>
                                                                    </div>
                                                                </div>
                                                                
                                                            </div>
    
                                                            <div class="item">
                                                                <div class="py-3">
                                                                    <p class="font-size-16 mb-4 text-white"></p>
    
                                                                    <div>
                                                                        <h4 class="font-size-16 text-primary"></h4>
                                                                        <p class="font-size-14 mb-0 text-white"><i class="bx bxs-quote-alt-left text-primary h1 align-middle me-3"></i>"A capacidade de enxergar oportunidades onde outros veem obstáculos é o que nos torna criadores de soluções."</p>
                                                                    </div>
                                                                </div>
                                                                
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end col -->

                    <div class="col-xl-3">
                        <div class="auth-full-page-content p-md-5 p-4">
                            <div class="w-100">

                                <div class="d-flex flex-column h-100">
                                    <div class="mb-4 mb-md-5">
                                        <a href="index.html" class="d-block auth-logo">
                                            <img src="assets/images/logo-dark.png" alt="" height="18" class="auth-logo-dark">
                                            <img src="assets/images/logo-light.png" alt="" height="18" class="auth-logo-light">
                                        </a>
                                    </div>
                                    <div class="my-auto">
                                        
                                        <div>
                                            <h5 class="text-primary">Registro de Conta</h5>
                                            <p class="text-muted">Pronto para começar? Preencha o formulário para se inscrever.</p>
                                        </div>
            
                                        <div class="mt-4">
                                            <form class="needs-validation" action="process-register.php" method="post" enctype="multipart/form-data">                                                      
                                                

                                                <div class="mb-3">
                                                    
                                                    <label for="userpassword" class="form-label">Crie uma senha</label>
                                                    <div class="input-group auth-pass-inputgroup">
                                                    <input type="password" class="form-control" id="userpassword" name="userpassword" placeholder="Digite uma senha" aria-label="Password" aria-describedby="password-addon" wfd-id="id1" required>
                                                    <button class="btn btn-light " type="button" id="password-addon"><i class="mdi mdi-eye-outline"></i></button>
                                                    <div class="invalid-feedback">
                                                        Escolha uma senha
                                                    </div>
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <select class="form-select" name="usercourse" required>
                                                        <option value="" disabled selected>Selecione um curso</option>
                                                        <option value="1">Lógica de programação</option>
                                                        <option value="2">Matemática</option>
                                                        <!-- Adicione opções para todos os cursos disponíveis -->
                                                    </select>
                                                    
                                                </div>
                                                <div class="mb-3">
                                                    <label for="userimage" class="form-label">Imagem de Perfil (PNG ou JPG, até 100MB)</label>
                                                    <input type="file" class="form-control" id="userimage" name="userimage" accept=".png, .jpg" required>
                                                    <div class="invalid-feedback">
                                                        Selecione uma imagem de perfil válida (PNG ou JPG, até 100MB).
                                                    </div>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="cep" class="form-label">CEP:</label>
                                                    <input type="text" class="form-control" name="cep" id="cep" placeholder="00000000" />
                                                    <label for="cidade" class="form-label">Cidade:</label>
                                                    <input type="text" class="form-control"name="cidade" id="cidade" />
    
                                                    <label for="rua" class="form-label">Rua:</label>
                                                    <input type="text" class="form-control" name="rua" id="rua" />
    
                                                    <label for="estado" class="form-label">Estado:</label>
                                                    <input type="text" class="form-control" name="estado" id="estado" />
                                                    </div>

                                                <div>
                                                    <p class="mb-0"><small>Ao se registrar você concorda com os</small>  <a href="#" class="text-primary">Termos de Uso</a></p>
                                                </div>
                                                <div class="mb-3">
                                                    <!-- Elemento de reCAPTCHA -->
                                                    <div class="g-recaptcha" data-sitekey="6LfcOJooAAAAAN9R6wTc8pvxv0XcpvhhqdMo4wl8" data-callback="enableRegisterButton"></div>
                                                </div>
                                                <div id="imageUploadSuccess" style="display: none;" class="alert alert-success">
                                                    Imagem de perfil carregada com sucesso.
                                                </div>
                                                <div id="imageUploadError" style="display: none;" class="alert alert-danger">
                                                    Ocorreu um erro ao carregar a imagem de perfil.
                                                </div>
                                                <div id="emailExistsError" style="display: none;" class="alert alert-danger">
                                                    O e-mail já existe. Por favor, escolha outro e-mail.
                                                </div>


                                                <div class="mt-4 d-grid">
                                                    <button id="registerButton" class="btn btn-primary waves-effect waves-light" type="submit" disabled>Registrar</button>
                                                </div>
                                                

                                            </form>

                                            <div class="mt-5 text-center">
                                                <p>Já tem uma conta ? <a href="auth-login-2.html" class="fw-medium text-primary"> Acesse sua conta</a> </p>
                                            </div>
        
                                        </div>
                                    </div>

                                    <div class="mt-4 mt-md-5 text-center">
                                        <p class="mb-0">© <script>document.write(new Date().getFullYear())</script> Weiner. Desenvolvido <i class="mdi mdi-microsoft-visual-studio-code text-primary"></i> by Pedro Weiner</p>
                                    </div>
                                </div>
                                
                                
                            </div>
                        </div>
                    </div>
                    <!-- end col -->
                </div>
                <!-- end row -->
            </div>
            <!-- end container-fluid -->
        </div>

        <!-- JAVASCRIPT -->
        <script src="assets/libs/jquery/jquery.min.js"></script>
        <script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="assets/libs/metismenu/metisMenu.min.js"></script>
        <script src="assets/libs/simplebar/simplebar.min.js"></script>
        <script src="assets/libs/node-waves/waves.min.js"></script>

        <!-- owl.carousel js -->
        <script src="assets/libs/owl.carousel/owl.carousel.min.js"></script>

        <!-- validation init -->
        <script src="assets/js/pages/validation.init.js"></script>

        <!-- auth-2-carousel init -->
        <script src="assets/js/pages/auth-2-carousel.init.js"></script>

        <!-- App js -->
        <script src="assets/js/app.js"></script>

            <!-- Seu formulário e outros elementos HTML -->


    
    <script src="assets/js/validador-cpf.js"></script>
    <script>
        // Função para formatar e validar o CPF à medida que o usuário digita
        document.getElementById("usercpf").addEventListener("input", function() {
            var cpfInput = this.value;
            var formattedCPF = cpfInput.replace(/\D/g, ''); // Remove caracteres não numéricos
            if (formattedCPF.length === 11) {
                // Se o CPF tiver 11 dígitos, formate-o
                formattedCPF = formattedCPF.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
            }
            this.value = formattedCPF;
        });
    </script>
    
    <script>
        const cpfField = document.getElementById('usercpf');
        const nameField = document.getElementById('username');
    
        cpfField.addEventListener('input', () => {
            const cpf = cpfField.value;
            
            if (validarCPF(cpf)) {
                cpfField.classList.add('valid-icon');
                // Simule o preenchimento automático do nome com base no CPF
                nameField.value = obterNomePeloCPF(cpf);
            } else {
                cpfField.classList.remove('valid-icon');
                nameField.value = '';
            }
        });
    
        // Função para validar CPF
        function validarCPF(cpf) {
            return isValidCPF(cpf);
        }
    
        // Função para verificar se o CPF é válido
        function isValidCPF(cpf) {
            cpf = cpf.replace(/[^\d]+/g, '');
    
            if (cpf == '') return false;
    
            if (cpf.length != 11 ||
                cpf == "00000000000" ||
                cpf == "11111111111" ||
                cpf == "22222222222" ||
                cpf == "33333333333" ||
                cpf == "44444444444" ||
                cpf == "55555555555" ||
                cpf == "66666666666" ||
                cpf == "77777777777" ||
                cpf == "88888888888" ||
                cpf == "99999999999") {
                return false;
            }
    
            let add = 0;
            for (let i = 0; i < 9; i++) {
                add += parseInt(cpf.charAt(i)) * (10 - i);
            }
    
            let rev = 11 - (add % 11);
            if (rev == 10 || rev == 11) {
                rev = 0;
            }
    
            if (rev != parseInt(cpf.charAt(9))) {
                return false;
            }
    
            add = 0;
            for (let i = 0; i < 10; i++) {
                add += parseInt(cpf.charAt(i)) * (11 - i);
            }
    
            rev = 11 - (add % 11);
            if (rev == 10 || rev == 11) {
                rev = 0;
            }
    
            if (rev != parseInt(cpf.charAt(10))) {
                return false;
            }
    
            return true;
        }
    </script>

<script>
    // Função que é chamada quando o captcha é completado
    function enableRegisterButton() {
        document.getElementById('registerButton').removeAttribute('disabled');
    }
</script>


<script>
// Após o sucesso do upload da imagem, adicione o seguinte código:
document.getElementById('userimage').setAttribute('disabled', 'disabled');
document.getElementById('imageUploadSuccess').style.display = 'block';

// Verificar e-mail existente (process-register.php)
if ($stmt->execute()) {
    // Redirecionar para a página de sucesso ou login
    header('Location: auth-login-2.html');
    exit();
} else {
    if ($stmt->errno === 1062) {
        // O código 1062 indica uma chave duplicada, o que significa que o e-mail já existe
        echo "O e-mail já existe. Por favor, escolha outro e-mail.";
    } else {
        echo "Erro ao cadastrar o usuário: " . $stmt->error;
    }
}

</script>

<!-- task cep -->

<script>
  $(document).ready(function() {
    $('#cep').blur(function() {
      var cep = $(this).val().replace(/\D/g, '');

      if (cep.length != 8) {
        return;
      }

      $.get(`https://viacep.com.br/ws/${cep}/json/`, function(data) {
        if (!data.erro) {
          $('#cidade').val(data.localidade);
          $('#rua').val(data.logradouro);
          $('#estado').val(data.uf);
        } else {
          alert('CEP não encontrado.');
        }
      });
    });
  });
</script>


    </body>


</html>
